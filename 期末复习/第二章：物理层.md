

# 物理层

*   物理层考虑的是怎样才能在连接各种计算机的传输媒体上**传输数据比特流**，而不是指具体的传输媒体

*   物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异

*   用于物理层的协议也常称为物理层规程（procedure）
*   物理层与具体的传输媒介无关

**主要任务**: 确定与传输媒体的接口的一些特性

*   机械特性：指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等
*   电气特性：指明在接口电缆的各条线上出现的电压的范围
*   功能特性：指明某条线上出现的某一电平的电压的意义
*   过程特性：指明对于不同功能的各种可能事件的出现顺序

代表设备

*   中继器

    对信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离，延长网络的长度

*   集线器

    对信号进行再生放大转发，对衰减的信号进行放大，接着转发到其他所有（除输入端口外）处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。不具备信号的定向传送能力，是一个共享式设备

## @数据通信系统的模型

![image-20200806221054127](img/2.png)

#### 实验机房中PC之间的通信方式

PC通过交换机连接而组成计算机网络不通过调制解调器和公用电话网直接是数字信号-->数字信号的传输   通过交换机组件的计算机网络不具有代表性，所以上述的模型是典型的数据通信模型

#### 常用术语

*   数据（data）——运送消息的实体（消息赋予数据语义，类似于信息与数据）

*   信号（signal）——数据的电气的或电磁的表现

*   模拟信号（analogous signal）——代表消息的参数的取值是连续的

*   数字信号（digital signal）——代表消息的参数的取值是离散的

*   码元（code）——在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形

使用双绞线传输，信号表示的是电压的高低使用光纤传输，信号表示的是光信号数据可以用这些信号来表现



#### 码元

*   在数字通信中常常用时间间隔相同的符号来表示一个二进制数字

*   这样的时间间隔内的信号称为二进制码元。而这个间隔被称为码元长度

*   1码元可以携带nbit的信息量

![image-20200807115130948](img/3.PNG)

#### 信道

一般用来表示向某一个方向传送信息的媒体
（平常说的通信线路往往包含一条发送信息的通道和一条接收信息的信道）

*   单向通信（单工通信）——只能有一个方向的通信而没有反方向的交互

*   双向交替通信（半双工通信）——通信的双方都可以发送信息，但不能双方同时发送（当然也就不能同时接收）
*   双向同时通信（全双工通信）——通信的双方可以同时发送和接收信息

##### 基带信号

（即基本频带信号）——来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号
基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行调制（modulation）

#### 调制分为两大类

*   基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码（coding）

*   带通调制：使用载波（carrier）进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道）。
*   带通信号：经过载波调制后的信号

#### 常用的编码方式

*   不归零制：正电平代表1，负电平代表-1

*   归零制：正脉冲代表1，负脉冲代表0

*   曼彻斯特编码：位周期中心的向上跳变代表0，位周期中心的向下跳变代表1。但也可反过来定义

*   差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变代表0，而位开始边界没有跳变代表1

![image-20200807120501614](img/4.png)

#### 信道的最大数据速率

尼奎斯特证明，如果一个任意信号通过了一个带宽为B的低通滤波器，那么只要进行每秒2B次（确切）采样，就可以完全重构出被过滤的信号。由于通过样值能恢复出来的高频成分已经被滤掉了，所以高于每秒2B次的采样毫无意义。如果信号包含了V个离散等级，则尼奎斯特的定理为：

![image-20200807121029815](img/5.png)
$$
最大数据速率=2B log_2V（比特/秒）
$$
例如，无噪声的3kHz信道不可能以超过6000bps的速率传输二进制（即只有两级的）信号。



到现在为止，我们只考虑了无噪声信道。如果存在随机噪声，情况会急剧地恶化。并且，由于系统中分子的运动，随机（热）噪声总是存在的。热噪声的数量可以用信号功率与噪声功率的比值来度量，这样的比值称为**信噪比**

如果我们将信号功率记作S，噪声功率记作N，则信噪比为S/N。通常情况下为了适用很大的范围，该比率表示成对数形式10log10S/N，对数的取值单位称为**分贝**

`deci`意味着10，而选择bel则是为了向发明了电话的贝尔致敬。10的信噪比为10分贝，100的信噪比为20分贝，1000的信噪比为30分贝，等等



香农的重大成果是：对于一条带宽为B Hz、噪声比是S/N的有噪声信道，其最大数据速率或者容量（capacity）是
![image-20200808101231137](img/6.png)

这结论告诉了我们**实际信道能获得的最大容量**

例如，在普通电话线上提供访问Internet的ADSL使用了大约1MHz的带宽。**线路上信噪比的程度取决于住宅和电话交换局之间的距离**，对于1~2千米的短距离来说40分贝的信噪比算是很好的状况了。正是因为电话线具有这样的特性，因此无论采用多少个信号等级，也不管采样频率多快或多慢，永远也不可能在该信道上获得高于13Mbps的数据率。实际上，ADSL的最高速率为12Mbps，虽然用户通常看到的速率要比这低得多。这个数据率实际上已经很好了，通信技术60多年的发展已经极大地缩小了香农容量与实际系统容量之间的沟壑



## @@通讯卫星

地球同步卫星

中地球轨道卫星

低地球轨道卫星

卫星与光纤



## @数字调制与多路复用

有线和无线信道运载模拟信号，模拟信号可表示成诸如连续变化的电压、光照强度或声音强度。为了发送数字信息，我们必须设法用模拟信号来表示比特。**比特与代表它们的信号之间的转换过程称为数字调制**

信道通常被多个信号共享。毕竟，用单根线缆传送几个信号比为每个信号铺设一根线缆要便利得多。这种信道的共享形式称为多路复用技术

![image-20200812222308799](img/44.png)

### 基带传输

数字调制的最直接形式是用正电压表示1，用负电压表示0。对光纤而言，可用光的存在表示1，没有光表示0。这种编码方案称为**不归零**

![image-20200808102515822](img/7.png)

一旦**NRZ信号**被发出去，它就沿线缆传播。在线缆的另一端，接收器以一定周期对信号采样，然后把采样信号转换成比特。接收到的信号看上去与发出来的不完全一样，这是因为信道本身造成的信号衰减和信号失真，以及接收器噪声对接收信号造成的影响所致。为了从信号中解码出比特，接收器把信号样值映射到最接近的符号。对于NRZ来说，接收到正电压表示发送过来的是1，接收到负电压表示发送过来的是0



### 多路复用

>   无论是广域网还是局域网，都存在这样一个事实，即传输介质的带宽大于传输单一信号所需的带宽，为了有效地利用传输系统，通常采用多路复用（Multiplexing）技术以同时携带多路信号来高效率地使用传输介质

**频分多路复用FDM** 

频分复用的所有用户在 同一时刻 分别占用 不同带宽 资源

**时分多路复用TDM** 

 时分复用的所有用户是在不同时间段占用同样频带宽度

**波分多路复用WDM ** 

波分复用就是光的频分复用

**码分多路复用CDM**

每个站点可使用整个频段通信，使用经过特殊挑选的不同码型，能够挑选出需要的信号，滤除其他信号，因此彼此不会造成干扰

这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现



## 数据通信基础知识

![image-20200811200212940](img/21.png)

通信的目的是**传送消息**（消息：语音、文字、图像、视频等）

数据data：传送信息的实体，通常是有意义的符号序列

信号：数据的电气/电磁的表现，是数据在传输过程中的存在形式

![image-20200811200622402](img/22.png)

*   信源：产生和发送数据的源头

*   信宿：接收数据的终点

*   信道：信号的**传输媒介**。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道

![image-20200811200746906](img/23.png)

**数据传输方式**

*   串行传输     

    将表示一个字符的8位二进制数按由低位到高位的顺序依次发送
    速度慢，费用低，适合远距离

*   并行传输

    将表示一个字符的8位二进制数同时通过8条信道发送。
    速度快，费用高，适合近距离

![image-20200811201351615](img/24.png)



### 常见名词

#### 信道

![image-20200811220612748](img/34.png)

![image-20200811220738147](img/35.png)



#### 码元

码元是指用一个**固定时长**的**信号波形**（数字脉冲），代表不同离散数值的基本波形，是数字通信中数字信号的**计量单位**，这个时长内的信号称为k进制码元，而该时长称为**码元宽度**。当码元的离散状态有M个时（M大于2），此时码元为**M进制码元**

1码元可以携带多个比特的信息量。例如，在使用二进制编码时，码元只有两种离散状态

![image-20200811210320902](img/27.png)

![image-20200811204117857](img/25.png)

#### 速率

速率也叫数据率，是指数据的传输速率，表示单位时间内传输的数据量。可以用码元传输速率和信息传输速率表示

**码元传输速率**

别名码元速率、波形速率、调制速率、符号速率等，它表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化的次数），单位是**波特**（Baud）。1波特表示数字通信系统每秒传输一个码元     就是**表示 1s传输多少个码元**

![image-20200811205509794](img/26.png)

**信息传输速率**

别名信息速率、比特率等，表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒（b/s）
1s传输多少个比特

关系：若一个码元携带n bit的信息量，则`M Baud`的码元传输速率所对应的信息传输速率为M×n bit/s。

二进制码元     一个波形携带1bit

四进制码元    一个波形携带2bit   

十六进制码元   一个波形携带4bit



**失真**

![image-20200811213431380](img/28.png)

**码间串扰**

码间串扰：接收端收到的信号波形失去了码元之间清晰界限的现象

信道带宽是信道能通过的最高频率和最低频率之差

高于或是低于信道带宽的范围都会发生码间串扰

#### **奈氏准则**

在理想低通（无噪声，带宽受限）条件下，为了避免码间串扰，极限码元传输速率为`2W Baud`，W是信道带宽，单位是Hz

![image-20200811214508153](img/29.png)

1.  在任何信道中，码元传输的速率是有上限的。若传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的完全正确识别成为不可能
2.  信道的频带越宽（即能通过的信号高频分量越多），就可以用更高的速率进行码元的有效传输
3.  奈氏准则给出了码元传输速率的限制，但并没有对信息传输速率给出限制
4.  由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个比特的信息量，这就需要采用多元制的调制方法

例.在无噪声的情况下，若某通信链路的带宽为3kHz，采用4个相位，每个相位具有4种振幅的QAM调制技术，则该通信链路的最大数据传输率是多少？

```
信号有4x4=16种变化
最大数据传输率=2x3k×4=24kb/s
```



#### 香农定理

**信噪比**
信噪比= 信号的平均功率 / 噪声的平均功率

常记为S/N，并用分贝（dB）作为度量单位，即：

![image-20200811214921913](img/30.png)

![image-20200811214958149](img/31.png)

1.信道的带宽或信道中的**信噪比越大**，则信息的**极限传输速率就越高**
2.对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了
3.**只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错的传输**
4.香农定理得出的为极限信息传输速率，实际信道能达到的传输速率要比它低不少
5.从香农定理可以看出，若信道带宽W或信噪比S/N没有上限（不可能），那么信道的极限信息传输速率也就没有上限

**例.**电话系统的典型参数是信道带宽为3000Hz，信噪比为30dB，则该系统最大数据传输速率是多少？

![image-20200811215401483](img/32.png)

**例题**

二进制信号在信噪比为127：1的4kHz信道上传输，最大的数据速率可达到多少？

![image-20200811220135807](img/33.png)

正确答案是通过奈氏准则计算出，若用香农计算，结果为 4000Xlog_2(1+127) = 28000 b/s

奈氏准则计算的结果为理想状态下的最大速率，此时有噪声，不理想，自然不能大于 8000b/s

所以奈氏计算为正确答案



### 编码与调制

*   编码的结果是将信号转化为数字信号
*   调制的结果是将信号转化为模拟信号

#### @数字数据编码为数字信号

常见的编码有

*   **非归零编码[NRZ]**
*   **曼彻斯特编码**
*   **差分曼彻斯特编码**
*   归零编码 [RZ]
*   反向不归零编码[NRZI]
*   4B/5B编码



##### **非归零编码[NRZ]**

高1低0

编码容易实现，但没有检错功能，且无法判断一个码元的开始和结束，以至于收发双方难以保持同步

不推荐使用

![image-20200812212001437](img/36.png)



##### 归零编码 [RZ]

信号电平在一个码元之内都要恢复到零

大量时间信道都处于零状态    浪费信道    不推荐使用

![image-20200812213616745](img/39.png)



##### 反向不归零编码[NRZI]

信号电平与**前一个码元**相比      翻转表示0   信号电平不变表示1

![image-20200812213737557](img/40.png)



##### **曼彻斯特编码**

曼彻斯特编码将一个码元分成两个相等的间隔，前一个间隔为**高**电平后一个间隔为**低**电平表示码元1；码元0则正好相反。也可以采用相反的规定

该编码的特点是在每一个码元的中间出现电平跳变，位中间的跳变既作时钟信号（可用于同步），又作数据信号，但它所占的频带宽度是原始的基带宽度的两倍

![image-20200812215254704](img/41.png)

在一个时间周期当中，信号变化两次

![image-20200812215728391](img/42.png)

每个码元都被调成两个电平，所以数据传输速率只有调制速率的一半



##### **差分曼彻斯特编码**

1同   0异

常用于**局域网传输**

若码元为1，则前半个码元的电平与上一个码元的后半个码元电平相同

若码元为0， 则反之

特点是，在每个码元的中间，都有一次电平的跳转，可以**实现自同步**，且抗干扰性强于曼彻斯特编码

![image-20200812220334078](img/43.png)





##### 4B/5B编码（了解）

比特流中插入额外的比特以打破一连串的0或1，就是用5个比特来编码4个比特的数据，之后再传给接收方，因此称为4B/5B。编码效率为80%

只采用16种对应16种不同的4位码，其他的16种作为控制码（帧的开始和结束，线路的状态信息等）或保留



### 调频与调相

![image-20200812222308799](F:/Typora_img/44.png)

某通信链路的波特率是1200Baud，采用4个相位，每个相位有4种振幅的QAM调制技术，则该链路的信息传输速率是多少？

```
因为  采用4个相位，每个相位有4种振幅
所以对应了16种码元   16种码元状态
所以每个码元需要用4个bit来表示
波特率为 1200Baud   就是一秒钟可以传输1200个码元
所以   信息传输速率 =  1200 X 4 = 4800 bit/s
```



### 模拟数据编码为数字信号

计算机内部处理的是二进制数据，处理的都是数字音频，所以需要将模拟音频通过采样、量化转换成有限个数字表示的离散序列（即实现音频数字化）
最典型的例子就是对音频信号进行编码的脉码调制（PCM），在计算机应用中，能够达到最高保真水平的就是PCM编码，被广泛用于素材保存及音乐欣赏，CD、DVD以及我们常见的WAV文件中均有应用。它主要包括三步：抽样、量化、编码

1.抽样：对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号
为了使所得的离散信号能无失真地代表被抽样的模拟数据，要使用采样定理进行采样：f采样频率≥2f信号最高频率2.量化：把抽样取得的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就把连续的电平幅值转换为离散的数字量
3.编码：把量化的结果转换为与之对应的二进制编码